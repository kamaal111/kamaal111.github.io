(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{3447:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/content/blogs/solvingCoreDataRaceConditions",function(){return t(8865)}])},8254:function(e,n,t){"use strict";var a=t(5893);t(7294);var s=t(1539),i=t(8162);async function r(e){var n,t,a;let s;let i=null===(n=e.props)||void 0===n?void 0:null===(t=n.children)||void 0===t?void 0:null===(a=t.props)||void 0===a?void 0:a.children;null!=i&&(s="string"==typeof i?i:i.map(e=>{var n,t;return"string"==typeof e?e:null!==(t=null==e?void 0:null===(n=e.props)||void 0===n?void 0:n.children)&&void 0!==t?t:""}).join(""),await navigator.clipboard.writeText(s))}n.Z=function(e){let{children:n,enabled:t=!0}=e;return t?(0,a.jsxs)("div",{className:"copyable-code",children:[(0,a.jsx)("button",{type:"button",className:"copy-button",onClick:async e=>{e.preventDefault(),await r(n)},children:(0,a.jsx)(i.Z,{name:(0,s.default)("fa","fa-2x","fa-clipboard","copy-icon")})}),n]}):n}},8162:function(e,n,t){"use strict";var a=t(5893);t(7294),n.Z=function(e){let{name:n}=e;return(0,a.jsx)("i",{className:n})}},763:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var a=t(5893),s=t(7294),i=t(8725);let r=new Date,c=r.getFullYear();var l=function(){let e;return(0,a.jsx)("footer",{children:(0,a.jsx)("div",{children:(0,a.jsx)("p",{children:(e=c===i.Z.since?String(i.Z.since):"".concat(i.Z.since,"-").concat(c),"â’¸ ".concat(e," ").concat(i.Z.fullName))})})})},o=t(9008),d=t.n(o),u=function(){return(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:"Kamaal Farah"})})},h=t(1664),m=t.n(h),f=t(1539),p=t(8162),j=function(e){let{className:n}=e,t=(0,f.default)("divider",null!=n?n:"");return(0,a.jsx)("div",{className:t})},x=function(e){let[n,t]=s.useState(!1);return s.useEffect(()=>{let a=window.matchMedia(e);function s(){n!==a.matches&&t(a.matches)}return a.matches!==n&&t(a.matches),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[n,e]),n};function w(){let[e,n]=s.useState(!1),t=x("(max-width: 770px)"),r=s.useCallback(t=>{t.preventDefault(),n(!e)},[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)("div",{className:"home-link",children:(0,a.jsx)(m(),{href:"/",children:i.Z.fullName})}),(0,a.jsx)("div",{className:"menu-links",children:(0,a.jsx)(w.MenuItems,{showMobileLayout:t,dropDownMenuItemsAreVisible:e,onHamburgerClick:r})})]}),(0,a.jsx)(w.Dropdown,{isVisible:e&&t})]})}w.Dropdown=function(e){let{isVisible:n}=e;return n?(0,a.jsxs)("div",{className:"dropdown-container",children:[(0,a.jsx)(j,{className:"animated-appearing"}),(0,a.jsx)("ul",{className:(0,f.default)("dropdown","animated-appearing"),children:i.Z.menuItems.map(e=>{let{id:n,name:t,link:s}=e;return(0,a.jsx)("li",{children:(0,a.jsx)(m(),{href:s,children:t})},n)})}),(0,a.jsx)(j,{className:(0,f.default)("animated-appearing","no-margin-bottom")})]}):null},w.MenuItems=function(e){let{showMobileLayout:n,dropDownMenuItemsAreVisible:t,onHamburgerClick:s}=e;return n?(0,a.jsx)("button",{type:"button",className:"icon-link",onClick:s,children:(0,a.jsx)(p.Z,{name:(0,f.default)("fa","fa-bars","fa-fw","hamburger",{toggled:t})})}):(0,a.jsx)(a.Fragment,{children:i.Z.menuItems.map(e=>{let{id:n,name:t,link:s}=e;return(0,a.jsx)(m(),{href:s,children:t},n)})})};var g=function(e){let{children:n,title:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(w,{}),(0,a.jsxs)("main",{children:[null!=t?(0,a.jsx)("h1",{className:"title",children:t}):null,n]}),(0,a.jsx)(l,{})]})}},8725:function(e,n){"use strict";n.Z={fullName:"Kamaal Farah",menuItems:[{id:"7845be0e-c294-48a4-9515-235d97b9ce83",link:"/projects",name:"Projects"},{id:"e789b819-d7c0-480f-89a2-99c03c1151e8",link:"/cheat-sheet",name:"Cheat sheet"}],socials:[{id:"69f7f3ca-72a0-4feb-aa17-27da51e09351",icon:"fa fa-2x fa-github",name:"GitHub",url:"https://github.com/kamaal111/"},{id:"59083d8c-399a-49dd-be52-4e4031a14023",icon:"fa fa-2x fa-linkedin",name:"LinkedIn",url:"https://www.linkedin.com/in/kamaalfarah/"},{id:"62959d55-66a9-4212-8ded-33e817c88c50",icon:"fa fa-2x fa-apple",name:"App Store",url:"https://apps.apple.com/bj/developer/kamaal-farah/id1502158009/"},{id:"2db4def3-38c9-43f6-8ee9-3f49800a0f0a",icon:"fa fa-2x fa-instagram",name:"Instagram",url:"https://www.instagram.com/_kamaalio/"}],since:2020,currentRoles:["Full Stack Software Engineer","iOS/macOS Developer"],contactEmail:"app.kamaal@gmail.com",lastUpdatedTermsAndConditions:"February 14th 2022"}},8865:function(e,n,t){"use strict";t.r(n);var a=t(5893),s=t(1151),i=t(763),r=t(8254);function c(e){let n=Object.assign({p:"p",code:"code",h2:"h2",pre:"pre",span:"span"},(0,s.ah)(),e.components);return(0,a.jsxs)(i.Z,{title:"Solving CoreData race conditions",children:[(0,a.jsx)(n.p,{children:"Ever seen this error when your application using CoreData crashes?"}),(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"fault: NULL _cd_rawData but the object is not being turned into a fault"})}),(0,a.jsxs)(n.p,{children:["This happens when you're trying to access the managed entry on a thread that the ",(0,a.jsx)(n.code,{children:"NSManagedObjectContext"})," is not on."]}),(0,a.jsx)(n.h2,{children:"Solution"}),(0,a.jsx)(n.p,{children:"Well this how solved it for myself."}),(0,a.jsxs)(n.p,{children:["You'll need to have access to ",(0,a.jsx)(n.code,{children:"NSManagedObjectContext"})," of the CoreData entry you're trying to access. I use singleton\nclass that I can use through my app called ",(0,a.jsx)(n.code,{children:"PersistenceController"}),"."]}),(0,a.jsxs)(n.p,{children:["Secondly I try to determine the failure point of this race condition. Then at the point where I have access to the\n",(0,a.jsx)(n.code,{children:"NSManagedObjectContext"})," and the Coredata entry I wrap this point in the following."]}),(0,a.jsx)(r.Z,{children:(0,a.jsx)(n.pre,{children:(0,a.jsxs)(n.code,{className:"hljs language-swift",children:[(0,a.jsx)(n.span,{className:"hljs-keyword",children:"await"})," ",(0,a.jsx)(n.span,{className:"hljs-type",children:"PersistenceController"}),".shared.context.perform {\n    ",(0,a.jsx)(n.span,{className:"hljs-comment",children:"// whatever code you where performing"}),"\n}\n"]})})}),(0,a.jsxs)(n.p,{children:["Now that I'm performing the action I wanted in the ",(0,a.jsx)(n.code,{children:"perform"})," block, I can safely assume that we have no more race conditions\nin this case."]})]})}n.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(c,e)})):c(e)}},1151:function(e,n,t){"use strict";t.d(n,{ah:function(){return i}});var a=t(7294);let s=a.createContext({});function i(e){let n=a.useContext(s);return a.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}}},function(e){e.O(0,[433,774,888,179],function(){return e(e.s=3447)}),_N_E=e.O()}]);