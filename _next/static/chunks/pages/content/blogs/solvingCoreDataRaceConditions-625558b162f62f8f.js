(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{3447:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/content/blogs/solvingCoreDataRaceConditions",function(){return a(7112)}])},9583:function(e,n,a){"use strict";var t=a(5893);a(7294);n.Z=function(e){var n=e.name;return(0,t.jsx)("i",{className:n})}},449:function(e,n,a){"use strict";a.d(n,{Z:function(){return b}});var t=a(5893),r=a(7294),s=a(6704);var i=(new Date).getFullYear();function c(){var e;return e=i===s.Z.since?String(s.Z.since):"".concat(s.Z.since,"-").concat(i),"\u24b8 ".concat(e," ").concat(s.Z.fullName)}var o=function(){return(0,t.jsx)("footer",{children:(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:c()})})})},l=a(9008),d=a.n(l);var h=function(){return(0,t.jsx)(d(),{children:(0,t.jsx)("title",{children:"Kamaal Farah"})})},u=a(603),m=a(1664),f=a.n(m),p=a(1539),j=a(9583);var x=function(e){var n=e.className,a=(0,p.default)("divider",null!==n&&void 0!==n?n:"");return(0,t.jsx)("div",{className:a})};var v=function(e){var n=(0,u.Z)(r.useState(!1),2),a=n[0],t=n[1];return r.useEffect((function(){var n=function(){a!==r.matches&&t(r.matches)},r=window.matchMedia(e);return r.matches!==a&&t(r.matches),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[a,e]),a};function w(){var e=(0,u.Z)(r.useState(!1),2),n=e[0],a=e[1],i=v("(max-width: 770px)"),c=r.useCallback((function(){a(!n)}),[n]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("div",{className:"home-link",children:(0,t.jsx)(f(),{href:"/",children:s.Z.fullName})}),(0,t.jsx)("div",{className:"menu-links",children:(0,t.jsx)(w.MenuItems,{showMobileLayout:i,dropDownMenuItemsAreVisible:n,onHamburgerClick:c})})]}),(0,t.jsx)(w.Dropdown,{isVisible:n&&i})]})}w.Dropdown=function(e){return e.isVisible?(0,t.jsxs)("div",{className:"dropdown-container",children:[(0,t.jsx)(x,{className:"animated-appearing"}),(0,t.jsx)("ul",{className:(0,p.default)("dropdown","animated-appearing"),children:s.Z.menuItems.map((function(e){var n=e.id,a=e.name,r=e.link;return(0,t.jsx)("li",{children:(0,t.jsx)(f(),{href:r,children:a})},n)}))}),(0,t.jsx)(x,{className:(0,p.default)("animated-appearing","no-margin-bottom")})]}):null},w.MenuItems=function(e){var n=e.showMobileLayout,a=e.dropDownMenuItemsAreVisible,r=e.onHamburgerClick;return n?(0,t.jsx)("button",{type:"button",className:"icon-link",onClick:r,children:(0,t.jsx)(j.Z,{name:(0,p.default)("fa","fa-bars","fa-fw","hamburger",{toggled:a})})}):(0,t.jsx)(t.Fragment,{children:s.Z.menuItems.map((function(e){var n=e.id,a=e.name,r=e.link;return(0,t.jsx)(f(),{href:r,children:a},n)}))})};var g=w;var b=function(e){var n=e.children,a=e.title;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{}),(0,t.jsx)(g,{}),(0,t.jsxs)("main",{children:[null!=a?(0,t.jsx)("h1",{className:"title",children:a}):null,n]}),(0,t.jsx)(o,{})]})}},6704:function(e,n){"use strict";n.Z={fullName:"Kamaal Farah",menuItems:[{id:"7845be0e-c294-48a4-9515-235d97b9ce83",link:"/projects",name:"Projects"},{id:"2f58ea56-1a22-4641-872f-873efb9b48fc",link:"/blogs",name:"Blogs"},{id:"e789b819-d7c0-480f-89a2-99c03c1151e8",link:"/cheat-sheet",name:"Cheat sheet"}],socials:[{id:"69f7f3ca-72a0-4feb-aa17-27da51e09351",icon:"fa fa-2x fa-github",name:"GitHub",url:"https://github.com/kamaal111/"},{id:"59083d8c-399a-49dd-be52-4e4031a14023",icon:"fa fa-2x fa-linkedin",name:"LinkedIn",url:"https://www.linkedin.com/in/kamaalfarah/"},{id:"62959d55-66a9-4212-8ded-33e817c88c50",icon:"fa fa-2x fa-apple",name:"App Store",url:"https://apps.apple.com/bj/developer/kamaal-farah/id1502158009/"}],since:2020,currentRoles:["Full Stack Software Engineer","iOS/macOS Developer"],contactEmail:"app.kamaal@gmail.com",lastUpdatedTermsAndConditions:"February 14th 2022"}},7112:function(e,n,a){"use strict";a.r(n);var t=a(5893),r=a(1151),s=a(449);function i(e){var n=Object.assign({p:"p",code:"code",h2:"h2",pre:"pre",span:"span"},(0,r.ah)(),e.components);return(0,t.jsxs)(s.Z,{title:"Solving CoreData race conditions",children:[(0,t.jsx)(n.p,{children:"Ever seen this error when your application using CoreData crashes?"}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"fault: NULL _cd_rawData but the object is not being turned into a fault"})}),(0,t.jsxs)(n.p,{children:["This happens when you're trying to access the managed entry on a thread that the ",(0,t.jsx)(n.code,{children:"NSManagedObjectContext"})," is not on."]}),(0,t.jsx)(n.h2,{children:"Solution"}),(0,t.jsx)(n.p,{children:"Well this how solved it for myself."}),(0,t.jsxs)(n.p,{children:["You'll need to have access to ",(0,t.jsx)(n.code,{children:"NSManagedObjectContext"})," of the CoreData entry you're trying to access. I use singleton\nclass that I can use through my app called ",(0,t.jsx)(n.code,{children:"PersistenceController"}),"."]}),(0,t.jsxs)(n.p,{children:["Secondly I try to determine the failure point of this race condition. Then at the point where I have access to the\n",(0,t.jsx)(n.code,{children:"NSManagedObjectContext"})," and the Coredata entry I wrap this point in the following."]}),(0,t.jsx)(n.pre,{children:(0,t.jsxs)(n.code,{className:"hljs language-swift",children:[(0,t.jsx)(n.span,{className:"hljs-keyword",children:"await"})," ",(0,t.jsx)(n.span,{className:"hljs-type",children:"PersistenceController"}),".shared.context.perform {\n    ",(0,t.jsx)(n.span,{className:"hljs-comment",children:"// whatever code you where performing"}),"\n}\n"]})}),(0,t.jsxs)(n.p,{children:["Now that I'm performing the action I wanted in the ",(0,t.jsx)(n.code,{children:"perform"})," block, I can safely assume that we have no more race conditions\nin this case."]})]})}n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,r.ah)(),e.components),a=n.wrapper;return a?(0,t.jsx)(a,Object.assign({},e,{children:(0,t.jsx)(i,e)})):i(e)}},1151:function(e,n,a){"use strict";a.d(n,{ah:function(){return s}});var t=a(7294);const r=t.createContext({});function s(e){const n=t.useContext(r);return t.useMemo((()=>"function"===typeof e?e(n):{...n,...e}),[n,e])}}},function(e){e.O(0,[570,774,888,179],(function(){return n=3447,e(e.s=n);var n}));var n=e.O();_N_E=n}]);